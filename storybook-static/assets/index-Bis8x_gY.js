import{r as i}from"./index-DpTt3J-R.js";import{c as y}from"./index-PdevSJdQ.js";import{r as j,I as U}from"./index-D9ZhQrDp.js";import{c as R}from"./index-CxBDjkVw.js";import{j as E}from"./jsx-runtime-BjG_zV1W.js";import{u as x}from"./index-B5ODnmFs.js";import{b,u as $}from"./index-bX3F6qy8.js";var M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],S=M.reduce((t,e)=>{const s=R(`Primitive.${e}`),n=i.forwardRef((r,o)=>{const{asChild:c,...d}=r,f=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...d,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function z(t,e){t&&j.flushSync(()=>t.dispatchEvent(e))}function H(t,e=globalThis?.document){const s=b(t);i.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var K="DismissableLayer",h="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",L,T=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=i.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:c,onDismiss:d,...f}=t,u=i.useContext(T),[l,I]=i.useState(null),v=l?.ownerDocument??globalThis?.document,[,B]=i.useState({}),F=x(e,a=>I(a)),P=Array.from(u.layers),[A]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),W=P.indexOf(A),D=l?P.indexOf(l):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,w=D>=W,_=Q(a=>{const p=a.target,C=[...u.branches].some(m=>m.contains(p));!w||C||(r?.(a),c?.(a),a.defaultPrevented||d?.())},v),O=V(a=>{const p=a.target;[...u.branches].some(m=>m.contains(p))||(o?.(a),c?.(a),a.defaultPrevented||d?.())},v);return H(a=>{D===u.layers.size-1&&(n?.(a),!a.defaultPrevented&&d&&(a.preventDefault(),d()))},v),i.useEffect(()=>{if(l)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(L=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(l)),u.layers.add(l),g(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=L)}},[l,v,s,u]),i.useEffect(()=>()=>{l&&(u.layers.delete(l),u.layersWithOutsidePointerEventsDisabled.delete(l),g())},[l,u]),i.useEffect(()=>{const a=()=>B({});return document.addEventListener(h,a),()=>document.removeEventListener(h,a)},[]),E.jsx(S.div,{...f,ref:F,style:{pointerEvents:k?w?"auto":"none":void 0,...t.style},onFocusCapture:y(t.onFocusCapture,O.onFocusCapture),onBlurCapture:y(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:y(t.onPointerDownCapture,_.onPointerDownCapture)})});q.displayName=K;var G="DismissableLayerBranch",J=i.forwardRef((t,e)=>{const s=i.useContext(T),n=i.useRef(null),r=x(e,n);return i.useEffect(()=>{const o=n.current;if(o)return s.branches.add(o),()=>{s.branches.delete(o)}},[s.branches]),E.jsx(S.div,{...t,ref:r})});J.displayName=G;function Q(t,e=globalThis?.document){const s=b(t),n=i.useRef(!1),r=i.useRef(()=>{});return i.useEffect(()=>{const o=d=>{if(d.target&&!n.current){let f=function(){N(X,s,u,{discrete:!0})};const u={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=f,e.addEventListener("click",r.current,{once:!0})):f()}else e.removeEventListener("click",r.current);n.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function V(t,e=globalThis?.document){const s=b(t),n=i.useRef(!1);return i.useEffect(()=>{const r=o=>{o.target&&!n.current&&N(Y,s,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function g(){const t=new CustomEvent(h);document.dispatchEvent(t)}function N(t,e,s,{discrete:n}){const r=s.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?z(r,o):r.dispatchEvent(o)}var Z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ee=Z.reduce((t,e)=>{const s=R(`Primitive.${e}`),n=i.forwardRef((r,o)=>{const{asChild:c,...d}=r,f=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...d,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),te="Portal",se=i.forwardRef((t,e)=>{const{container:s,...n}=t,[r,o]=i.useState(!1);$(()=>o(!0),[]);const c=s||r&&globalThis?.document?.body;return c?U.createPortal(E.jsx(ee.div,{...n,ref:e}),c):null});se.displayName=te;export{q as D,se as P};
