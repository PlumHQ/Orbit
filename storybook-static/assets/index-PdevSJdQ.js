import{r as s,a as p}from"./index-DpTt3J-R.js";import{u as g}from"./index-bX3F6qy8.js";import{u as M}from"./index-B5ODnmFs.js";function b(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}var y=p[" useId ".trim().toString()]||(()=>{}),I=0;function F(n){const[e,t]=s.useState(y());return g(()=>{t(o=>o??String(I++))},[n]),e?`radix-${e}`:""}var O=p[" useInsertionEffect ".trim().toString()]||g;function W({prop:n,defaultProp:e,onChange:t=()=>{},caller:o}){const[r,c,m]=S({defaultProp:e,onChange:t}),a=n!==void 0,f=a?n:r;{const u=s.useRef(n!==void 0);s.useEffect(()=>{const l=u.current;l!==a&&console.warn(`${o} is changing from ${l?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,o])}const i=s.useCallback(u=>{if(a){const l=h(u)?u(n):u;l!==n&&m.current?.(l)}else c(u)},[a,n,c,m]);return[f,i]}function S({defaultProp:n,onChange:e}){const[t,o]=s.useState(n),r=s.useRef(t),c=s.useRef(e);return O(()=>{c.current=e},[e]),s.useEffect(()=>{r.current!==t&&(c.current?.(t),r.current=t)},[t,r]),[t,o,c]}function h(n){return typeof n=="function"}function P(n,e){return s.useReducer((t,o)=>e[t][o]??t,n)}var w=n=>{const{present:e,children:t}=n,o=T(e),r=typeof t=="function"?t({present:o.isPresent}):s.Children.only(t),c=M(o.ref,C(r));return typeof t=="function"||o.isPresent?s.cloneElement(r,{ref:c}):null};w.displayName="Presence";function T(n){const[e,t]=s.useState(),o=s.useRef(null),r=s.useRef(n),c=s.useRef("none"),m=n?"mounted":"unmounted",[a,f]=P(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=v(o.current);c.current=a==="mounted"?i:"none"},[a]),g(()=>{const i=o.current,u=r.current;if(u!==n){const N=c.current,d=v(i);n?f("MOUNT"):d==="none"||i?.display==="none"?f("UNMOUNT"):f(u&&N!==d?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,f]),g(()=>{if(e){let i;const u=e.ownerDocument.defaultView??window,l=d=>{const E=v(o.current).includes(d.animationName);if(d.target===e&&E&&(f("ANIMATION_END"),!r.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",i=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},N=d=>{d.target===e&&(c.current=v(o.current))};return e.addEventListener("animationstart",N),e.addEventListener("animationcancel",l),e.addEventListener("animationend",l),()=>{u.clearTimeout(i),e.removeEventListener("animationstart",N),e.removeEventListener("animationcancel",l),e.removeEventListener("animationend",l)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:s.useCallback(i=>{o.current=i?getComputedStyle(i):null,t(i)},[])}}function v(n){return n?.animationName||"none"}function C(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{w as P,F as a,b as c,W as u};
