import{r as i,a as M}from"./index-DpTt3J-R.js";import{u as A}from"./index-CC9pek2O.js";import{u as R}from"./index-B5ODnmFs.js";function b(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}var S=M[" useId ".trim().toString()]||(()=>{}),g=0;function F(n){const[e,t]=i.useState(S());return A(()=>{t(o=>o??String(g++))},[n]),e?`radix-${e}`:""}var P=M[" useInsertionEffect ".trim().toString()]||A;function W({prop:n,defaultProp:e,onChange:t=()=>{},caller:o}){const[r,c,d]=w({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r;{const u=i.useRef(n!==void 0);i.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${o} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,o])}const s=i.useCallback(u=>{var f;if(a){const m=T(u)?u(n):u;m!==n&&((f=d.current)==null||f.call(d,m))}else c(u)},[a,n,c,d]);return[l,s]}function w({defaultProp:n,onChange:e}){const[t,o]=i.useState(n),r=i.useRef(t),c=i.useRef(e);return P(()=>{c.current=e},[e]),i.useEffect(()=>{var d;r.current!==t&&((d=c.current)==null||d.call(c,t),r.current=t)},[t,r]),[t,o,c]}function T(n){return typeof n=="function"}function E(n,e){return i.useReducer((t,o)=>e[t][o]??t,n)}var U=n=>{const{present:e,children:t}=n,o=h(e),r=typeof t=="function"?t({present:o.isPresent}):i.Children.only(t),c=R(o.ref,y(r));return typeof t=="function"||o.isPresent?i.cloneElement(r,{ref:c}):null};U.displayName="Presence";function h(n){const[e,t]=i.useState(),o=i.useRef(null),r=i.useRef(n),c=i.useRef("none"),d=n?"mounted":"unmounted",[a,l]=E(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const s=p(o.current);c.current=a==="mounted"?s:"none"},[a]),A(()=>{const s=o.current,u=r.current;if(u!==n){const m=c.current,N=p(s);n?l("MOUNT"):N==="none"||(s==null?void 0:s.display)==="none"?l("UNMOUNT"):l(u&&m!==N?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),A(()=>{if(e){let s;const u=e.ownerDocument.defaultView??window,f=N=>{const I=p(o.current).includes(N.animationName);if(N.target===e&&I&&(l("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",s=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},m=N=>{N.target===e&&(c.current=p(o.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(s),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:i.useCallback(s=>{o.current=s?getComputedStyle(s):null,t(s)},[])}}function p(n){return(n==null?void 0:n.animationName)||"none"}function y(n){var o,r;let e=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{U as P,F as a,b as c,W as u};
