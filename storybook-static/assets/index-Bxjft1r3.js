import{r as o}from"./index-DpTt3J-R.js";import{c as y}from"./index-Zex7zZ5g.js";import{r as j,I as U}from"./index-D9ZhQrDp.js";import{c as R}from"./index-B6TRxRi1.js";import{j as E}from"./jsx-runtime-BjG_zV1W.js";import{u as x}from"./index-B5ODnmFs.js";import{b,u as $}from"./index-CC9pek2O.js";var M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],S=M.reduce((t,e)=>{const n=R(`Primitive.${e}`),s=o.forwardRef((r,i)=>{const{asChild:u,...a}=r,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function z(t,e){t&&j.flushSync(()=>t.dispatchEvent(e))}function H(t,e=globalThis==null?void 0:globalThis.document){const n=b(t);o.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var K="DismissableLayer",h="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",O,T=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:u,onDismiss:a,...f}=t,d=o.useContext(T),[l,B]=o.useState(null),v=(l==null?void 0:l.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,A]=o.useState({}),F=x(e,c=>B(c)),P=Array.from(d.layers),[I]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),W=P.indexOf(I),D=l?P.indexOf(l):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,w=D>=W,_=Q(c=>{const p=c.target,L=[...d.branches].some(m=>m.contains(p));!w||L||(r==null||r(c),u==null||u(c),c.defaultPrevented||a==null||a())},v),C=V(c=>{const p=c.target;[...d.branches].some(m=>m.contains(p))||(i==null||i(c),u==null||u(c),c.defaultPrevented||a==null||a())},v);return H(c=>{D===d.layers.size-1&&(s==null||s(c),!c.defaultPrevented&&a&&(c.preventDefault(),a()))},v),o.useEffect(()=>{if(l)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(O=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(l)),d.layers.add(l),g(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=O)}},[l,v,n,d]),o.useEffect(()=>()=>{l&&(d.layers.delete(l),d.layersWithOutsidePointerEventsDisabled.delete(l),g())},[l,d]),o.useEffect(()=>{const c=()=>A({});return document.addEventListener(h,c),()=>document.removeEventListener(h,c)},[]),E.jsx(S.div,{...f,ref:F,style:{pointerEvents:k?w?"auto":"none":void 0,...t.style},onFocusCapture:y(t.onFocusCapture,C.onFocusCapture),onBlurCapture:y(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:y(t.onPointerDownCapture,_.onPointerDownCapture)})});q.displayName=K;var G="DismissableLayerBranch",J=o.forwardRef((t,e)=>{const n=o.useContext(T),s=o.useRef(null),r=x(e,s);return o.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),E.jsx(S.div,{...t,ref:r})});J.displayName=G;function Q(t,e=globalThis==null?void 0:globalThis.document){const n=b(t),s=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let f=function(){N(X,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=f,e.addEventListener("click",r.current,{once:!0})):f()}else e.removeEventListener("click",r.current);s.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function V(t,e=globalThis==null?void 0:globalThis.document){const n=b(t),s=o.useRef(!1);return o.useEffect(()=>{const r=i=>{i.target&&!s.current&&N(Y,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function g(){const t=new CustomEvent(h);document.dispatchEvent(t)}function N(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?z(r,i):r.dispatchEvent(i)}var Z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ee=Z.reduce((t,e)=>{const n=R(`Primitive.${e}`),s=o.forwardRef((r,i)=>{const{asChild:u,...a}=r,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),te="Portal",se=o.forwardRef((t,e)=>{var a;const{container:n,...s}=t,[r,i]=o.useState(!1);$(()=>i(!0),[]);const u=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return u?U.createPortal(E.jsx(ee.div,{...s,ref:e}),u):null});se.displayName=te;export{q as D,se as P};
