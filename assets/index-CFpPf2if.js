import{R as x,r as i}from"./index-DpTt3J-R.js";import{a as z,c as h,u as J}from"./index-Zex7zZ5g.js";import{c as G,b as Q}from"./index-CC9pek2O.js";import{u as P}from"./index-B5ODnmFs.js";import{c as D}from"./index-B6TRxRi1.js";import{j as m}from"./jsx-runtime-BjG_zV1W.js";import"./index-D9ZhQrDp.js";function W(e){const o=e+"CollectionProvider",[c,r]=G(o),[R,v]=c(o,{collectionRef:{current:null},itemMap:new Map}),p=f=>{const{scope:t,children:u}=f,d=x.useRef(null),n=x.useRef(new Map).current;return m.jsx(R,{scope:t,itemMap:n,collectionRef:d,children:u})};p.displayName=o;const I=e+"CollectionSlot",b=D(I),C=x.forwardRef((f,t)=>{const{scope:u,children:d}=f,n=v(I,u),s=P(t,n.collectionRef);return m.jsx(b,{ref:s,children:d})});C.displayName=I;const a=e+"CollectionItemSlot",S="data-radix-collection-item",F=D(a),g=x.forwardRef((f,t)=>{const{scope:u,children:d,...n}=f,s=x.useRef(null),T=P(t,s),A=v(a,u);return x.useEffect(()=>(A.itemMap.set(s,{ref:s,...n}),()=>void A.itemMap.delete(s))),m.jsx(F,{[S]:"",ref:T,children:d})});g.displayName=a;function w(f){const t=v(e+"CollectionConsumer",f);return x.useCallback(()=>{const d=t.collectionRef.current;if(!d)return[];const n=Array.from(d.querySelectorAll(`[${S}]`));return Array.from(t.itemMap.values()).sort((A,_)=>n.indexOf(A.ref.current)-n.indexOf(_.ref.current))},[t.collectionRef,t.itemMap])}return[{Provider:p,Slot:C,ItemSlot:g},w,r]}var X=i.createContext(void 0);function Z(e){const o=i.useContext(X);return e||o||"ltr"}var ee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],L=ee.reduce((e,o)=>{const c=D(`Primitive.${o}`),r=i.forwardRef((R,v)=>{const{asChild:p,...I}=R,b=p?c:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(b,{...I,ref:v})});return r.displayName=`Primitive.${o}`,{...e,[o]:r}},{}),M="rovingFocusGroup.onEntryFocus",te={bubbles:!1,cancelable:!0},y="RovingFocusGroup",[O,K,oe]=W(y),[re,be]=G(y,[oe]),[ne,ce]=re(y),k=i.forwardRef((e,o)=>m.jsx(O.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(O.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(se,{...e,ref:o})})}));k.displayName=y;var se=i.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,orientation:r,loop:R=!1,dir:v,currentTabStopId:p,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:b,onEntryFocus:C,preventScrollOnEntryFocus:a=!1,...S}=e,F=i.useRef(null),g=P(o,F),w=Z(v),[f,t]=J({prop:p,defaultProp:I??null,onChange:b,caller:y}),[u,d]=i.useState(!1),n=Q(C),s=K(c),T=i.useRef(!1),[A,_]=i.useState(0);return i.useEffect(()=>{const l=F.current;if(l)return l.addEventListener(M,n),()=>l.removeEventListener(M,n)},[n]),m.jsx(ne,{scope:c,orientation:r,dir:w,loop:R,currentTabStopId:f,onItemFocus:i.useCallback(l=>t(l),[t]),onItemShiftTab:i.useCallback(()=>d(!0),[]),onFocusableItemAdd:i.useCallback(()=>_(l=>l+1),[]),onFocusableItemRemove:i.useCallback(()=>_(l=>l-1),[]),children:m.jsx(L.div,{tabIndex:u||A===0?-1:0,"data-orientation":r,...S,ref:g,style:{outline:"none",...e.style},onMouseDown:h(e.onMouseDown,()=>{T.current=!0}),onFocus:h(e.onFocus,l=>{const Y=!T.current;if(l.target===l.currentTarget&&Y&&!u){const j=new CustomEvent(M,te);if(l.currentTarget.dispatchEvent(j),!j.defaultPrevented){const N=s().filter(E=>E.focusable),$=N.find(E=>E.active),H=N.find(E=>E.id===f),q=[$,H,...N].filter(Boolean).map(E=>E.ref.current);V(q,a)}}T.current=!1}),onBlur:h(e.onBlur,()=>d(!1))})})}),U="RovingFocusGroupItem",B=i.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,focusable:r=!0,active:R=!1,tabStopId:v,children:p,...I}=e,b=z(),C=v||b,a=ce(U,c),S=a.currentTabStopId===C,F=K(c),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:f}=a;return i.useEffect(()=>{if(r)return g(),()=>w()},[r,g,w]),m.jsx(O.ItemSlot,{scope:c,id:C,focusable:r,active:R,children:m.jsx(L.span,{tabIndex:S?0:-1,"data-orientation":a.orientation,...I,ref:o,onMouseDown:h(e.onMouseDown,t=>{r?a.onItemFocus(C):t.preventDefault()}),onFocus:h(e.onFocus,()=>a.onItemFocus(C)),onKeyDown:h(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){a.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const u=ue(t,a.orientation,a.dir);if(u!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let n=F().filter(s=>s.focusable).map(s=>s.ref.current);if(u==="last")n.reverse();else if(u==="prev"||u==="next"){u==="prev"&&n.reverse();const s=n.indexOf(t.currentTarget);n=a.loop?le(n,s+1):n.slice(s+1)}setTimeout(()=>V(n))}}),children:typeof p=="function"?p({isCurrentTabStop:S,hasTabStop:f!=null}):p})})});B.displayName=U;var ie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ue(e,o,c){const r=ae(e.key,c);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ie[r]}function V(e,o=!1){const c=document.activeElement;for(const r of e)if(r===c||(r.focus({preventScroll:o}),document.activeElement!==c))return}function le(e,o){return e.map((c,r)=>e[(o+r)%e.length])}var Se=k,ge=B;export{ge as I,Se as R,W as a,be as c,Z as u};
